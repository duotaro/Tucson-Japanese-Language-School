# ãƒã‚°
ä»¥ä¸‹ã®å•é¡Œç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

ãƒ»ãƒ‹ãƒ¥ãƒ¼ã‚¹è©³ç´°ã®ã€Œãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸€è¦§ã«æˆ»ã‚‹ã€ãŒç¿»è¨³ã•ã‚Œãªã„ã€‚
ãƒ»cloudflareã«deployã—ãŸã‚‚ã®ã§ã€Œæ²¿é©ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç”»åƒãŒï¼‘ã¤ã—ã‹è¡¨ç¤ºã§ãã¦ãªã„ã€‚æœ¬æ¥ã¯ï¼“ã¤ï¼ˆæ¤œè¨¼ç’°å¢ƒã®å®šç¾©ã¯ä½•ï¼Ÿï¼‰
ãƒ»è¬›å¸«ä¸€è¦§ã®ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§æ™‚é–“ãŒã‹ã‹ã‚‹æ™‚ãŒã‚ã‚‹ã€‚ï¼ˆã—ã‚‡ã†ãŒãªã„ï¼Ÿã„ã„å¯¾ç­–ãŒã‚ã‚‹ï¼Ÿï¼‰
ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯ã€Œå¹´é–“äºˆå®šã€ã®ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãŒã€deployã—ãŸã‚‚ã®ã§ã¯è¡¨ç¤ºã•ã‚Œã¦ãªã„
ãƒ»ã‚¯ãƒ©ã‚¹ç´¹ä»‹ã®ç”»åƒã®ä½ç½®ã‚’ã€æ¨ªã«ä¸¦ã‚“ã§ã„ã‚‹ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã®ä¸Šä¸‹ä¸­å¤®ã«é…ç½®ã—ãŸã„
ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯ã€Œ3ã¤ã®æ–¹æ³•ã§è²¢çŒ®ã™ã‚‹ã€ã®ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãŒã€deployã—ãŸã‚‚ã®ã§ã¯è¡¨ç¤ºã•ã‚Œã¦ãªã„
ãƒ»å¯„ä»˜ãƒšãƒ¼ã‚¸ã®ã€Œhttps://tucsonhosyuko.square.site/ã€ã¸ã®ãƒªãƒ³ã‚¯ã‚’åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ããŸã„ï¼ˆå¤–éƒ¨ãƒªãƒ³ã‚¯ã§ã‚ã‚‹ã“ã¨ã‚’çŸ¥ã‚‰ã›ã‚‹å¿…è¦ã‚ã‚‹ãªã‚‰ã‚„ã‚ŠãŸã„ï¼‰
ãƒ»ã‚¯ãƒ©ã‚¹ç´¹ä»‹ãƒšãƒ¼ã‚¸ã®ä»¥ä¸‹ã®è¦ç´ ãŒã€è‹±èªã ã¨ãƒ‡ã‚¶ã‚¤ãƒ³å´©ã‚Œã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã€ã©ã†ã«ã‹ã—ãŸã„ã€‚
<button class="rounded text-sm text-white text-semiboldborder px-2 py-1 shadow transition mt-4 bg-blue-400 hover:bg-blue-600">Inherited Japanese classes</button>

ãƒ»ä¸€æ—¦å…¥å­¦ç”³è¾¼ãƒ•ã‚©ãƒ¼ãƒ ãªã©ã‚’éè¡¨ç¤ºã«ã™ã‚‹


ä»•æ§˜å¿˜ã‚Œ
ãƒ»çµ„ç¹”è¦ç´„ã®ãƒªãƒ³ã‚¯å…ˆã¯æ—¥æœ¬èªã¨è‹±èªã§åˆ†ã‹ã‚Œã¦ã„ã‚‹ï¼ŸNotionã‚’ç¢ºèªã™ã‚‹ï¼ˆå¹´é–“å ±å‘Šã¨ã‹ã¯åˆ¥ã‚Œã¦ã‚‹ï¼‰
- ãã®ä»–ã‚‚ç¢ºèª
å­¦æ ¡è¦è¦§





# ãƒ„ãƒ¼ã‚½ãƒ³æ—¥æœ¬èªå­¦æ ¡ã‚µã‚¤ãƒˆæ”¹å–„ææ¡ˆæ›¸

**ä½œæˆæ—¥**: 2025å¹´6æœˆ28æ—¥  
**å¯¾è±¡**: ãƒ„ãƒ¼ã‚½ãƒ³æ—¥æœ¬èªå­¦æ ¡ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ  
**ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Next.js 13 + Notion CMS

---

## ğŸ“Š ç¾çŠ¶åˆ†æçµæœ

### **æŠ€è¡“çš„ç¾çŠ¶**
- **ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚º**: 201MBï¼ˆæ”¹å–„è¦ï¼‰
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Next.js SSG + Firebase Hostingï¼ˆè‰¯å¥½ï¼‰
- **å¤šè¨€èªå¯¾å¿œ**: æ—¥æœ¬èª/è‹±èªå¯¾å¿œæ¸ˆã¿ï¼ˆè‰¯å¥½ï¼‰
- **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿**: åŸºæœ¬å®Ÿè£…æ¸ˆã¿ï¼ˆæ‹¡å¼µè¦ï¼‰
- **ç”»åƒæœ€é©åŒ–**: éƒ¨åˆ†çš„å®Ÿè£…ï¼ˆæ”¹å–„è¦ï¼‰

### **ä¸»è¦èª²é¡Œ**
1. **å¤§å®¹é‡ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚º** - åˆæœŸèª­ã¿è¾¼ã¿é…å»¶
2. **ç”»åƒæœ€é©åŒ–ç„¡åŠ¹** - `images.unoptimized = true`
3. **CSSæœ€é©åŒ–ä¸è¶³** - å…¨è¦ç´ transitioné©ç”¨
4. **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿é™å®š** - åŸºæœ¬çµ„ç¹”æƒ…å ±ã®ã¿
5. **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ä¸è¶³** - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã€ARIAãƒ©ãƒ™ãƒ«

---

## ğŸš€ æ”¹å–„æ–½ç­–è©³ç´°

## **1. è»½é‡åŒ–ãƒ»é«˜é€ŸåŒ–æ–½ç­–**

### **ğŸ”¥ Phase 1: ç·Šæ€¥å¯¾å¿œï¼ˆ1-2é€±é–“ï¼‰**

#### **A. ç”»åƒæœ€é©åŒ–ã®æŠœæœ¬çš„æ”¹å–„**

**ç¾åœ¨ã®å•é¡Œ**:
```javascript
// next.config.js - ç¾åœ¨ã®è¨­å®š
images: {
  unoptimized: true  // Next.jsæœ€é©åŒ–ãŒç„¡åŠ¹
}
```

**æ”¹å–„ææ¡ˆ**:
```javascript
// next.config.js - æ¨å¥¨è¨­å®š
images: {
  unoptimized: false, // Next.jsæœ€é©åŒ–ã‚’æœ‰åŠ¹åŒ–
  domains: [
    'files.notion.so',
    'prod-files-secure.s3.us-west-2.amazonaws.com'
  ], // Notionç”»åƒãƒ‰ãƒ¡ã‚¤ãƒ³è¿½åŠ 
  formats: ['image/webp', 'image/avif'], // æœ€æ–°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¯¾å¿œ
  minimumCacheTTL: 31536000, // 1å¹´ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  deviceSizes: [640, 768, 1024, 1280, 1920], // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
  imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
}
```

**æœŸå¾…åŠ¹æœ**: ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚º40-50%å‰Šæ¸›

#### **B. Critical CSSåˆ†é›¢**

**ç¾åœ¨ã®å•é¡Œ**:
```css
/* globals.css - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è² è· */
* {
  transition-property: color, background-color, border-color, 
                      text-decoration-color, fill, stroke, opacity, 
                      box-shadow, transform, filter, backdrop-filter;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
```

**æ”¹å–„ææ¡ˆ**:
```css
/* critical.css - Above-the-foldå°‚ç”¨ */
.hero-section {
  /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
}

/* non-critical.css - é…å»¶èª­ã¿è¾¼ã¿ */
.interactive-element {
  transition: transform 0.2s ease;
}

.card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1);
}
```

**å®Ÿè£…æ–¹æ³•**:
```javascript
// _document.js
<Head>
  <style dangerouslySetInnerHTML={{
    __html: criticalCSS // Above-the-foldã®CSS
  }} />
  <link rel="preload" href="/styles/non-critical.css" as="style" 
        onLoad="this.onload=null;this.rel='stylesheet'" />
</Head>
```

#### **C. webpack Bundleæœ€é©åŒ–**

**æ”¹å–„ææ¡ˆ**:
```javascript
// next.config.js
webpack: (config, { isServer, dev }) => {
  // ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ã®æœ€é©åŒ–
  if (!dev && !isServer) {
    config.optimization.splitChunks = {
      chunks: 'all',
      cacheGroups: {
        default: false,
        vendors: false,
        // Reacté–¢é€£ã‚’åˆ¥chunkåŒ–
        react: {
          name: 'react',
          chunks: 'all',
          test: /[\\/]node_modules[\\/](react|react-dom)[\\/]/,
          priority: 40,
        },
        // Notion APIé–¢é€£ã‚’åˆ¥chunkåŒ–
        notion: {
          name: 'notion',
          chunks: 'all',
          test: /[\\/]lib[\\/]notion/,
          priority: 30,
        },
        // å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        common: {
          name: 'common',
          chunks: 'all',
          minChunks: 2,
          priority: 20,
        },
      },
    };
  }
  return config;
}
```

### **ğŸŸ¡ Phase 2: ä¸­æœŸæ”¹å–„ï¼ˆ3-4é€±é–“ï¼‰**

#### **D. Dynamic Importså°å…¥**

**å®Ÿè£…ä¾‹**:
```javascript
// pages/[[...slug]].js
import dynamic from 'next/dynamic';

// å¤§ããªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‹•çš„èª­ã¿è¾¼ã¿
const NewsDetailPage = dynamic(
  () => import('../components/pages/news/detail'),
  {
    loading: () => <div className="animate-pulse">Loading...</div>,
    ssr: true // SEOã®ãŸã‚SSRã¯ç¶­æŒ
  }
);

const SliderList = dynamic(
  () => import('../components/parts/slider/index'),
  {
    loading: () => <div className="h-96 bg-gray-200 animate-pulse"></div>
  }
);

// ä½¿ç”¨æ³•
switch (pageType) {
  case 'news/detail':
    return <NewsDetailPage {...pageProps} locale={currentLocale} />;
  default:
    return <HomePage {...pageProps} locale={currentLocale} />;
}
```

#### **E. APIå‘¼ã³å‡ºã—æœ€é©åŒ–**

**ç¾åœ¨ã®èª²é¡Œ**: ãƒ‡ãƒ¼ã‚¿å–å¾—ãŒéåŠ¹ç‡

**æ”¹å–„ææ¡ˆ**:
```javascript
// lib/notion.js - æœ€é©åŒ–ç‰ˆ
export const getOptimizedDatabase = async (
  databaseId, 
  options = {}
) => {
  const {
    pageSize = 50,
    filterProperties = [],
    sorts = [{ timestamp: 'last_edited_time', direction: 'descending' }]
  } = options;

  try {
    const response = await notion.databases.query({
      database_id: databaseId,
      page_size: pageSize,
      filter: options.filter,
      sorts,
      // å¿…è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿é¸æŠ
      ...(filterProperties.length > 0 && {
        select: filterProperties
      })
    });

    return response.results;
  } catch (error) {
    console.error(`Notion API Error for ${databaseId}:`, error);
    return [];
  }
};

// ä½¿ç”¨ä¾‹
const newsData = await getOptimizedDatabase(newsId, {
  pageSize: 10,
  filterProperties: ['title', 'date', 'text', 'image'],
  filter: {
    property: 'published',
    checkbox: { equals: true }
  }
});
```

---

## **2. SEOæœ€é©åŒ–å¼·åŒ–**

### **ğŸ¯ Phase 1: ç·Šæ€¥å¯¾å¿œ**

#### **A. æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿å¤§å¹…æ‹¡å¼µ**

**ç¾åœ¨**: åŸºæœ¬çš„ãªçµ„ç¹”æƒ…å ±ã®ã¿

**æ”¹å–„ææ¡ˆ**:

**1. ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ç”¨æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿**:
```javascript
// components/pages/news/detail.js
const generateArticleStructuredData = (article, locale) => ({
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": article.title,
  "datePublished": article.date,
  "dateModified": article.lastModified || article.date,
  "author": {
    "@type": "Organization",
    "name": locale === 'ja' ? "ãƒ„ãƒ¼ã‚½ãƒ³æ—¥æœ¬èªå­¦æ ¡" : "Tucson Japanese School",
    "url": "https://tjschool.org"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Tucson Japanese School",
    "logo": {
      "@type": "ImageObject",
      "url": "https://tjschool.org/logo.png"
    }
  },
  "description": article.description,
  "image": article.image ? `https://tjschool.org${article.image}` : null,
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": `https://tjschool.org/${locale === 'en' ? 'en/' : ''}news/${article.id}/`
  }
});
```

**2. æ•™è‚²ã‚³ãƒ¼ã‚¹ç”¨æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿**:
```javascript
// components/pages/program/class.js
const generateCourseStructuredData = (course, locale) => ({
  "@context": "https://schema.org",
  "@type": "Course",
  "name": course.name,
  "description": course.description,
  "provider": {
    "@type": "EducationalOrganization",
    "name": locale === 'ja' ? "ãƒ„ãƒ¼ã‚½ãƒ³æ—¥æœ¬èªå­¦æ ¡" : "Tucson Japanese School",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "US",
      "addressRegion": "AZ",
      "addressLocality": "Tucson"
    }
  },
  "courseCode": course.code,
  "educationalLevel": course.level,
  "teaches": course.curriculum,
  "timeRequired": course.duration,
  "availableLanguage": ["ja", "en"]
});
```

**3. ã‚¤ãƒ™ãƒ³ãƒˆç”¨æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿**:
```javascript
// components/pages/program/events.js
const generateEventStructuredData = (event, locale) => ({
  "@context": "https://schema.org",
  "@type": "Event",
  "name": event.name,
  "description": event.description,
  "startDate": event.startDate,
  "endDate": event.endDate,
  "eventStatus": "https://schema.org/EventScheduled",
  "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
  "location": {
    "@type": "Place",
    "name": "Tucson Japanese School",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "US",
      "addressRegion": "AZ", 
      "addressLocality": "Tucson"
    }
  },
  "organizer": {
    "@type": "Organization",
    "name": "Tucson Japanese School",
    "url": "https://tjschool.org"
  }
});
```

#### **B. ãƒ¡ã‚¿ã‚¿ã‚°å®Œå…¨æœ€é©åŒ–**

**_document.jsæ”¹å–„**:
```javascript
// pages/_document.js
export default function Document() {
  return (
    <Html>
      <Head>
        {/* åŸºæœ¬ãƒ¡ã‚¿ã‚¿ã‚° */}
        <meta charSet="utf-8" />
        <meta name="robots" content="index, follow, max-image-preview:large" />
        <meta name="googlebot" content="index, follow" />
        
        {/* PWAå¯¾å¿œ */}
        <meta name="theme-color" content="#1E40AF" />
        <meta name="msapplication-TileColor" content="#1E40AF" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        
        {/* ã‚¢ã‚¤ã‚³ãƒ³é¡ */}
        <link rel="icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
        <link rel="manifest" href="/site.webmanifest" />
        
        {/* DNS Prefetch */}
        <link rel="dns-prefetch" href="//files.notion.so" />
        <link rel="dns-prefetch" href="//www.google-analytics.com" />
        
        {/* Preconnect */}
        <link rel="preconnect" href="https://files.notion.so" crossOrigin="" />
        
        {/* æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ - çµ„ç¹” */}
        <script
          type="application/ld+json"
          dangerouslySetInnerHTML={{
            __html: JSON.stringify({
              "@context": "https://schema.org",
              "@type": "EducationalOrganization",
              "name": "Tucson Japanese Language School",
              "alternateName": "ãƒ„ãƒ¼ã‚½ãƒ³æ—¥æœ¬èªå­¦æ ¡",
              "url": "https://tjschool.org",
              "logo": {
                "@type": "ImageObject",
                "url": "https://tjschool.org/logo.png",
                "width": 300,
                "height": 60
              },
              "address": {
                "@type": "PostalAddress",
                "addressCountry": "US",
                "addressRegion": "AZ",
                "addressLocality": "Tucson",
                "postalCode": "85701"
              },
              "description": "Tucson Japanese Language School provides Japanese language education for children and adults in Tucson, Arizona.",
              "foundingDate": "2010",
              "email": "info@tjschool.org",
              "sameAs": [
                "https://www.facebook.com/tjschool"
              ],
              "hasCredential": {
                "@type": "EducationalOccupationalCredential",
                "credentialCategory": "Language Education"
              }
            })
          }}
        />
        
        {/* WebSiteæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ */}
        <script
          type="application/ld+json"
          dangerouslySetInnerHTML={{
            __html: JSON.stringify({
              "@context": "https://schema.org",
              "@type": "WebSite",
              "name": "Tucson Japanese School",
              "url": "https://tjschool.org",
              "potentialAction": {
                "@type": "SearchAction",
                "target": {
                  "@type": "EntryPoint",
                  "urlTemplate": "https://tjschool.org/search?q={search_term_string}"
                },
                "query-input": "required name=search_term_string"
              }
            })
          }}
        />
      </Head>
      <body>
        <Main />
        <NextScript />
      </body>
    </Html>
  )
}
```

#### **C. ãƒšãƒ¼ã‚¸åˆ¥OGPæœ€é©åŒ–**

**å„ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®å®Ÿè£…**:
```javascript
// components/pages/news/detail.js
export default function NewsDetailPage({ newsItem, locale }) {
  const { json, metaTitleExtension } = useLocale(locale);
  
  const ogpImage = newsItem.image 
    ? `https://tjschool.org${newsItem.image}`
    : `https://tjschool.org/og-image-${locale}.png`;

  return (
    <>
      <Head>
        <title>{newsItem.title} - {metaTitleExtension}</title>
        <meta name="description" content={newsItem.description || newsItem.text?.substring(0, 160)} />
        
        {/* Open Graph */}
        <meta property="og:title" content={`${newsItem.title} - ${metaTitleExtension}`} />
        <meta property="og:description" content={newsItem.description} />
        <meta property="og:image" content={ogpImage} />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content={`https://tjschool.org/${locale === 'en' ? 'en/' : ''}news/${newsItem.id}/`} />
        <meta property="og:locale" content={locale === 'ja' ? 'ja_JP' : 'en_US'} />
        
        {/* Twitter Card */}
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content={newsItem.title} />
        <meta name="twitter:description" content={newsItem.description} />
        <meta name="twitter:image" content={ogpImage} />
        
        {/* Article specific */}
        <meta property="article:published_time" content={newsItem.date} />
        <meta property="article:author" content="Tucson Japanese School" />
        <meta property="article:section" content="News" />
        {newsItem.tags?.map(tag => (
          <meta key={tag} property="article:tag" content={tag} />
        ))}
        
        {/* Language alternatives */}
        <link rel="alternate" hrefLang="ja" href={`https://tjschool.org/news/${newsItem.id}/`} />
        <link rel="alternate" hrefLang="en" href={`https://tjschool.org/en/news/${newsItem.id}/`} />
        <link rel="alternate" hrefLang="x-default" href={`https://tjschool.org/news/${newsItem.id}/`} />
        
        {/* æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ */}
        <script
          type="application/ld+json"
          dangerouslySetInnerHTML={{
            __html: JSON.stringify(generateArticleStructuredData(newsItem, locale))
          }}
        />
      </Head>
      {/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
    </>
  );
}
```

### **ğŸ“ˆ Phase 2: ä¸­æœŸæ”¹å–„**

#### **D. ã‚µã‚¤ãƒˆãƒãƒƒãƒ—æ©Ÿèƒ½å¼·åŒ–**

**next-sitemap.jsè¨­å®šæ‹¡å¼µ**:
```javascript
// next-sitemap.config.js
const siteUrl = 'https://tjschool.org';

module.exports = {
  siteUrl,
  generateRobotsTxt: true,
  exclude: ['/admin/*', '/api/*'],
  alternateRefs: [
    {
      href: siteUrl,
      hreflang: 'ja',
    },
    {
      href: `${siteUrl}/en`,
      hreflang: 'en',
    },
    {
      href: siteUrl,
      hreflang: 'x-default',
    },
  ],
  transform: async (config, path) => {
    // ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã®å ´åˆ
    if (path.includes('/news/') && path !== '/news/') {
      return {
        loc: path,
        changefreq: 'weekly',
        priority: 0.8,
        lastmod: new Date().toISOString(),
        alternateRefs: [
          {
            href: `${siteUrl}${path}`,
            hreflang: 'ja',
          },
          {
            href: `${siteUrl}/en${path}`,
            hreflang: 'en',
          },
        ],
      };
    }
    
    // ä¸€èˆ¬ãƒšãƒ¼ã‚¸
    return {
      loc: path,
      changefreq: 'monthly',
      priority: path === '/' ? 1.0 : 0.7,
      lastmod: new Date().toISOString(),
    };
  },
  robotsTxtOptions: {
    policies: [
      {
        userAgent: '*',
        allow: '/',
        disallow: ['/admin/', '/api/'],
      },
    ],
    additionalSitemaps: [
      `${siteUrl}/sitemap-news.xml`,
      `${siteUrl}/sitemap-images.xml`,
    ],
  },
};
```

#### **E. Core Web Vitalsæœ€é©åŒ–**

**1. LCP (Largest Contentful Paint) æ”¹å–„**:
```javascript
// components/parts/slider/index.js
export default function SliderList({ sliderList, locale }) {
  return (
    <section className="hero-section">
      {sliderList.map((slide, index) => (
        <ImageOptimizer
          key={slide.id}
          baseName={slide.image.baseName}
          pagePath={slide.image.pagePath}
          alt={slide.alt}
          priority={index === 0} // æœ€åˆã®ç”»åƒã®ã¿å„ªå…ˆèª­ã¿è¾¼ã¿
          sizes="100vw"
          responsive={true}
          responsiveType="hero"
          className="w-full h-96 object-cover"
        />
      ))}
    </section>
  );
}
```

**2. CLS (Cumulative Layout Shift) æ”¹å–„**:
```css
/* globals.cssè¿½åŠ  */
/* ç”»åƒã‚³ãƒ³ãƒ†ãƒŠã®ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”å›ºå®š */
.aspect-ratio-16-9 {
  aspect-ratio: 16/9;
}

.aspect-ratio-4-3 {
  aspect-ratio: 4/3;
}

.aspect-ratio-1-1 {
  aspect-ratio: 1/1;
}

/* èª­ã¿è¾¼ã¿ä¸­ã®ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ */
.skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
```

**3. FID (First Input Delay) æ”¹å–„**:
```javascript
// components/parts/nav/nav.js
import { useCallback } from 'react';

export default function Navigation({ menuItems, locale }) {
  // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ãƒ¡ãƒ¢åŒ–
  const handleMenuClick = useCallback((href) => {
    // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†
    router.push(href);
  }, [router]);

  return (
    <nav role="navigation" aria-label="Main navigation">
      {menuItems.map((item) => (
        <button
          key={item.id}
          onClick={() => handleMenuClick(item.href)}
          className="focus:ring-2 focus:ring-blue-500 focus:outline-none
                     hover:bg-blue-50 transition-colors duration-150
                     px-4 py-2 rounded-md"
          aria-current={item.isActive ? 'page' : undefined}
        >
          {item.title}
        </button>
      ))}
    </nav>
  );
}
```

---

## **3. ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„**

### **ğŸ‘¥ Phase 1: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¼·åŒ–**

#### **A. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å®Œå…¨å¯¾å¿œ**

**1. ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†**:
```javascript
// components/parts/menu/LocaleLink.jsx
import { useRouter } from 'next/router';
import Link from 'next/link';
import { useContext, useRef } from 'react';

export default function LocaleLink({ href, className, children, ...props }) {
  const { locale } = useContext(LocaleContext);
  const router = useRouter();
  const linkRef = useRef(null);
  
  let safeHref = href || "/";
  if (typeof safeHref !== "string") {
    safeHref = "/";
  }
  
  if (locale === "en") {
    safeHref = `/en${safeHref}`;
  }
  
  const isActive = router.asPath === safeHref;
  
  return (
    <Link 
      href={safeHref} 
      className={`
        ${className}
        focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none
        hover:text-blue-600 transition-colors duration-150
        ${isActive ? 'text-blue-600 font-semibold' : ''}
      `}
      aria-current={isActive ? 'page' : undefined}
      ref={linkRef}
      {...props}
    >
      {children}
    </Link>
  );
}
```

**2. ARIAãƒ©ãƒ™ãƒ«å®Ÿè£…**:
```javascript
// components/parts/slider/index.js
export default function SliderList({ sliderList, locale }) {
  const [currentSlide, setCurrentSlide] = useState(0);
  
  return (
    <section 
      className="slider-container"
      role="region"
      aria-label={locale === 'ja' ? 'ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼' : 'Main slider'}
    >
      <div 
        className="slider-wrapper"
        role="group"
        aria-labelledby="slider-heading"
        aria-live="polite"
      >
        <h2 id="slider-heading" className="sr-only">
          {locale === 'ja' ? 'ãŠçŸ¥ã‚‰ã›ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼' : 'News Slider'}
        </h2>
        
        {sliderList.map((slide, index) => (
          <div
            key={slide.id}
            className={`slide ${index === currentSlide ? 'active' : 'hidden'}`}
            role="tabpanel"
            aria-labelledby={`slide-tab-${index}`}
            aria-hidden={index !== currentSlide}
          >
            <ImageOptimizer
              baseName={slide.image.baseName}
              pagePath={slide.image.pagePath}
              alt={`${slide.title} - ${slide.description || ''}`}
              priority={index === 0}
            />
          </div>
        ))}
      </div>
      
      {/* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */}
      <div className="slider-controls" role="tablist" aria-label="Slide selection">
        {sliderList.map((_, index) => (
          <button
            key={index}
            id={`slide-tab-${index}`}
            role="tab"
            aria-controls={`slide-panel-${index}`}
            aria-selected={index === currentSlide}
            onClick={() => setCurrentSlide(index)}
            className={`
              w-3 h-3 rounded-full mx-1 transition-colors duration-150
              focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none
              ${index === currentSlide ? 'bg-blue-600' : 'bg-gray-300'}
            `}
          >
            <span className="sr-only">
              {locale === 'ja' ? `ã‚¹ãƒ©ã‚¤ãƒ‰ ${index + 1}` : `Slide ${index + 1}`}
            </span>
          </button>
        ))}
      </div>
    </section>
  );
}
```

#### **B. ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ**

**1. ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTMLä½¿ç”¨**:
```javascript
// components/pages/news/index.js
export default function NewsIndexPage({ newsList, locale }) {
  const { json } = useLocale(locale);
  
  return (
    <main role="main">
      <header className="page-header">
        <h1 className="text-3xl font-bold">
          {json.navigation.news}
        </h1>
        <p className="text-gray-600 mt-2">
          {locale === 'ja' 
            ? 'å­¦æ ¡ã‹ã‚‰ã®æœ€æ–°ã®ãŠçŸ¥ã‚‰ã›ã‚’ã”è¦§ãã ã•ã„'
            : 'View the latest news from our school'
          }
        </p>
      </header>
      
      <section className="news-list" role="region" aria-labelledby="news-heading">
        <h2 id="news-heading" className="sr-only">ãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸€è¦§</h2>
        
        {newsList.length === 0 ? (
          <p role="status" aria-live="polite">
            {locale === 'ja' ? 'ãŠçŸ¥ã‚‰ã›ã¯ã‚ã‚Šã¾ã›ã‚“' : 'No news available'}
          </p>
        ) : (
          <ul className="space-y-6" role="list">
            {newsList.map((news, index) => (
              <li key={news.id} className="news-item">
                <article className="bg-white p-6 rounded-lg shadow-sm">
                  <header>
                    <h3 className="text-xl font-semibold mb-2">
                      <LocaleLink 
                        href={`/news/${news.id}/`}
                        className="hover:text-blue-600 focus:text-blue-600"
                        aria-describedby={`news-date-${index} news-excerpt-${index}`}
                      >
                        {news.title}
                      </LocaleLink>
                    </h3>
                    <time 
                      id={`news-date-${index}`}
                      dateTime={news.rawDate}
                      className="text-gray-500 text-sm"
                    >
                      {news.date}
                    </time>
                  </header>
                  
                  {news.image && (
                    <figure className="mt-4">
                      <ImageOptimizer
                        baseName={news.image.baseName}
                        pagePath={news.image.pagePath}
                        alt={`${news.title}ã®ç”»åƒ`}
                        responsive={true}
                        responsiveType="card"
                        className="rounded-md"
                      />
                    </figure>
                  )}
                  
                  <p id={`news-excerpt-${index}`} className="mt-4 text-gray-700">
                    {news.excerpt || news.text?.substring(0, 150) + '...'}
                  </p>
                  
                  <footer className="mt-4">
                    <LocaleLink 
                      href={`/news/${news.id}/`}
                      className="inline-flex items-center text-blue-600 hover:text-blue-800"
                      aria-label={`${news.title}ã®è©³ç´°ã‚’èª­ã‚€`}
                    >
                      {locale === 'ja' ? 'è©³ç´°ã‚’è¦‹ã‚‹' : 'Read more'}
                      <svg className="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                      </svg>
                    </LocaleLink>
                  </footer>
                </article>
              </li>
            ))}
          </ul>
        )}
      </section>
    </main>
  );
}
```

### **ğŸ¨ Phase 2: ãƒ¢ãƒã‚¤ãƒ«UXæ”¹å–„**

#### **A. ã‚¿ãƒƒãƒãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**

**1. ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºæœ€é©åŒ–**:
```css
/* globals.cssè¿½åŠ  */
/* ãƒ¢ãƒã‚¤ãƒ«ç”¨ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆ */
.touch-target {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation;
}

/* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ  */
.mobile-menu-item {
  min-height: 48px;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  touch-action: manipulation;
}

/* ãƒœã‚¿ãƒ³é¡ */
.btn-mobile {
  min-height: 44px;
  padding: 12px 24px;
  font-size: 16px; /* iOS zoomé˜²æ­¢ */
}

/* ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ› */
.input-mobile {
  min-height: 44px;
  font-size: 16px; /* iOS zoomé˜²æ­¢ */
  padding: 12px 16px;
}
```

**2. ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å¯¾å¿œ**:
```javascript
// components/parts/slider/index.js
import { useSwipeable } from 'react-swipeable';

export default function SliderList({ sliderList, locale }) {
  const [currentSlide, setCurrentSlide] = useState(0);
  
  const nextSlide = () => {
    setCurrentSlide((prev) => 
      prev === sliderList.length - 1 ? 0 : prev + 1
    );
  };
  
  const prevSlide = () => {
    setCurrentSlide((prev) => 
      prev === 0 ? sliderList.length - 1 : prev - 1
    );
  };
  
  const handlers = useSwipeable({
    onSwipedLeft: nextSlide,
    onSwipedRight: prevSlide,
    trackMouse: true,
    trackTouch: true,
    delta: 10,
    preventScrollOnSwipe: true,
  });
  
  return (
    <div {...handlers} className="slider-container">
      {/* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
    </div>
  );
}
```

#### **B. ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒª(PWA)å¯¾å¿œ**

**1. Web App Manifestä½œæˆ**:
```json
// public/site.webmanifest
{
  "name": "Tucson Japanese Language School",
  "short_name": "TJS",
  "description": "Learn Japanese in Tucson, Arizona",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#1E40AF",
  "orientation": "portrait-primary",
  "icons": [
    {
      "src": "/icons/icon-72x72.png",
      "sizes": "72x72",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "/icons/icon-96x96.png",
      "sizes": "96x96",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "/icons/icon-128x128.png",
      "sizes": "128x128",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "/icons/icon-144x144.png",
      "sizes": "144x144",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "/icons/icon-152x152.png",
      "sizes": "152x152",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "/icons/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "/icons/icon-384x384.png",
      "sizes": "384x384",
      "type": "image/png",
      "purpose": "maskable any"
    },
    {
      "src": "/icons/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "maskable any"
    }
  ],
  "shortcuts": [
    {
      "name": "News",
      "short_name": "News",
      "description": "Latest school news",
      "url": "/news/",
      "icons": [{ "src": "/icons/news-96x96.png", "sizes": "96x96" }]
    },
    {
      "name": "Classes",
      "short_name": "Classes",
      "description": "Japanese classes",
      "url": "/program/class/",
      "icons": [{ "src": "/icons/classes-96x96.png", "sizes": "96x96" }]
    }
  ],
  "categories": ["education", "language"],
  "lang": "ja",
  "dir": "ltr"
}
```

**2. Service Workerå®Ÿè£…**:
```javascript
// public/sw.js
const CACHE_NAME = 'tjs-v1';
const urlsToCache = [
  '/',
  '/en/',
  '/styles/globals.css',
  '/icons/icon-192x192.png',
  '/favicon.ico'
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => cache.addAll(urlsToCache))
  );
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => {
        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚‹å ´åˆã¯è¿”ã™ã€ãªã‘ã‚Œã°ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰å–å¾—
        return response || fetch(event.request);
      })
  );
});
```

### **ğŸ” Phase 3: æ¤œç´¢æ©Ÿèƒ½å®Ÿè£…**

#### **A. ã‚µã‚¤ãƒˆå†…æ¤œç´¢æ©Ÿèƒ½**

**1. æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç”Ÿæˆ**:
```javascript
// lib/search.js
import Fuse from 'fuse.js';

export const createSearchIndex = (pages, news, locale) => {
  const searchData = [
    // ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
    ...pages.map(page => ({
      id: page.id,
      type: 'page',
      title: page.title,
      content: page.content,
      url: page.url,
      locale
    })),
    // ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹
    ...news.map(article => ({
      id: article.id,
      type: 'news',
      title: article.title,
      content: article.text,
      url: `/news/${article.id}/`,
      date: article.date,
      locale
    }))
  ];

  const options = {
    keys: [
      { name: 'title', weight: 0.7 },
      { name: 'content', weight: 0.3 }
    ],
    threshold: 0.3,
    includeScore: true,
    includeMatches: true
  };

  return new Fuse(searchData, options);
};
```

**2. æ¤œç´¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
```javascript
// components/parts/search/SearchBox.js
import { useState, useEffect, useRef } from 'react';
import { useDebounce } from '../../../hooks/useDebounce';

export default function SearchBox({ searchIndex, locale, onResults }) {
  const [query, setQuery] = useState('');
  const [isOpen, setIsOpen] = useState(false);
  const [results, setResults] = useState([]);
  const inputRef = useRef(null);
  const resultsRef = useRef(null);
  
  const debouncedQuery = useDebounce(query, 300);
  
  useEffect(() => {
    if (debouncedQuery && searchIndex) {
      const searchResults = searchIndex.search(debouncedQuery);
      setResults(searchResults.slice(0, 10)); // ä¸Šä½10ä»¶
      setIsOpen(true);
      onResults?.(searchResults);
    } else {
      setResults([]);
      setIsOpen(false);
    }
  }, [debouncedQuery, searchIndex, onResults]);
  
  const handleKeyDown = (e) => {
    if (e.key === 'Escape') {
      setIsOpen(false);
      inputRef.current?.blur();
    }
  };
  
  return (
    <div className="relative">
      <div className="relative">
        <input
          ref={inputRef}
          type="search"
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          onKeyDown={handleKeyDown}
          placeholder={locale === 'ja' ? 'ã‚µã‚¤ãƒˆå†…æ¤œç´¢...' : 'Search site...'}
          className="
            w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
            focus:ring-2 focus:ring-blue-500 focus:border-blue-500
            text-gray-900 placeholder-gray-500
          "
          aria-label={locale === 'ja' ? 'ã‚µã‚¤ãƒˆå†…æ¤œç´¢' : 'Search site'}
          aria-expanded={isOpen}
          aria-haspopup="listbox"
          role="combobox"
        />
        <div className="absolute inset-y-0 left-0 flex items-center pl-3">
          <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
      </div>
      
      {isOpen && results.length > 0 && (
        <div 
          ref={resultsRef}
          className="
            absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg
            max-h-96 overflow-y-auto
          "
          role="listbox"
        >
          {results.map((result, index) => (
            <div
              key={result.item.id}
              className="
                px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0
                focus:bg-gray-50 focus:outline-none
              "
              role="option"
              tabIndex={0}
              onClick={() => {
                window.location.href = result.item.url;
              }}
            >
              <div className="flex items-center justify-between">
                <div className="flex-1">
                  <h4 className="text-sm font-medium text-gray-900">
                    {result.item.title}
                  </h4>
                  <p className="text-xs text-gray-500 mt-1">
                    {result.item.type === 'news' ? 
                      (locale === 'ja' ? 'ãƒ‹ãƒ¥ãƒ¼ã‚¹' : 'News') : 
                      (locale === 'ja' ? 'ãƒšãƒ¼ã‚¸' : 'Page')
                    }
                    {result.item.date && ` â€¢ ${result.item.date}`}
                  </p>
                </div>
                <div className="text-xs text-gray-400">
                  {Math.round((1 - result.score) * 100)}% match
                </div>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
```

---

## **4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ãƒ»åˆ†æ**

### **ğŸ“Š Phase 3: åˆ†æãƒ»æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«æ§‹ç¯‰**

#### **A. Web Vitalsç›£è¦–**

**1. Real User Monitoring (RUM)å®Ÿè£…**:
```javascript
// lib/analytics.js
export const reportWebVitals = (metric) => {
  const { name, value, id } = metric;
  
  // Google Analytics 4ã¸ã®é€ä¿¡
  if (typeof gtag !== 'undefined') {
    gtag('event', name, {
      custom_parameter_1: id,
      custom_parameter_2: Math.round(name === 'CLS' ? value * 1000 : value),
    });
  }
  
  // ç‹¬è‡ªåˆ†æã¸ã®é€ä¿¡
  fetch('/api/analytics', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ metric })
  });
};
```

**2. _app.jsçµ±åˆ**:
```javascript
// pages/_app.js
import { reportWebVitals } from '../lib/analytics';

function MyApp({ Component, pageProps }) {
  return (
    <LocaleProvider>
      <Component {...pageProps} />
    </LocaleProvider>
  );
}

export { reportWebVitals };
export default MyApp;
```

#### **B. ãƒãƒ³ãƒ‰ãƒ«ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼å°å…¥**

**package.jsonè¿½åŠ **:
```json
{
  "scripts": {
    "analyze": "cross-env ANALYZE=true next build",
    "analyze:server": "cross-env BUNDLE_ANALYZE=server next build",
    "analyze:browser": "cross-env BUNDLE_ANALYZE=browser next build"
  },
  "devDependencies": {
    "@next/bundle-analyzer": "^13.5.11"
  }
}
```

**next.config.jsè¨­å®š**:
```javascript
const withBundleAnalyzer = require('@next/bundle-analyzer')({
  enabled: process.env.ANALYZE === 'true',
});

module.exports = withBundleAnalyzer({
  // æ—¢å­˜ã®è¨­å®š...
});
```

---

## **5. å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—**

### **ğŸ”´ Phase 1: ç·Šæ€¥å¯¾å¿œï¼ˆ1-2é€±é–“ï¼‰**

**å„ªå…ˆåº¦: æœ€é«˜**
- [ ] ç”»åƒæœ€é©åŒ–è¨­å®šå¤‰æ›´ (`next.config.js`)
- [ ] Critical CSSåˆ†é›¢å®Ÿè£…
- [ ] æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µï¼ˆçµ„ç¹”ã€WebSiteï¼‰
- [ ] åŸºæœ¬çš„ãªãƒ¡ã‚¿ã‚¿ã‚°å®Œå…¨å®Ÿè£…

**æœŸå¾…åŠ¹æœ**:
- ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚º: 201MB â†’ 120MB (-40%)
- åˆæœŸè¡¨ç¤ºé€Ÿåº¦: 30%å‘ä¸Š
- SEOã‚¹ã‚³ã‚¢: 15-20ç‚¹å‘ä¸Š

### **ğŸŸ¡ Phase 2: ä¸­æœŸæ”¹å–„ï¼ˆ3-4é€±é–“ï¼‰**

**å„ªå…ˆåº¦: é«˜**
- [ ] Dynamic importså°å…¥
- [ ] ãƒšãƒ¼ã‚¸åˆ¥æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿å®Ÿè£…
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ”¹å–„ï¼ˆARIAã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ï¼‰
- [ ] Web Vitalsæœ€é©åŒ–

**æœŸå¾…åŠ¹æœ**:
- JavaScriptåˆæœŸãƒ­ãƒ¼ãƒ‰: 50%å‰Šæ¸›
- Lighthouse Accessibility: 95ç‚¹ä»¥ä¸Š
- Core Web Vitals: å…¨æŒ‡æ¨™Good

### **ğŸŸ¢ Phase 3: é•·æœŸæœ€é©åŒ–ï¼ˆ1-2ãƒ¶æœˆï¼‰**

**å„ªå…ˆåº¦: ä¸­**
- [ ] æ¤œç´¢æ©Ÿèƒ½å®Ÿè£…
- [ ] PWAå¯¾å¿œ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
- [ ] A/Bãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰

**æœŸå¾…åŠ¹æœ**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ: 25%å‘ä¸Š
- ãƒ¢ãƒã‚¤ãƒ«åˆ©ç”¨ä½“é¨“: å¤§å¹…æ”¹å–„
- é‹ç”¨åŠ¹ç‡: ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«ç¢ºç«‹

---

## **6. æœŸå¾…ã•ã‚Œã‚‹æ”¹å–„åŠ¹æœ**

### **ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™**

| é …ç›® | ç¾åœ¨ | Phase 1å¾Œ | Phase 3å¾Œ |
|------|------|-----------|-----------|
| ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚º | 201MB | 120MB | 80MB |
| åˆæœŸè¡¨ç¤ºé€Ÿåº¦ | 3.5s | 2.4s | 1.8s |
| First Contentful Paint | 2.8s | 1.9s | 1.2s |
| Largest Contentful Paint | 4.2s | 2.8s | 2.0s |
| Cumulative Layout Shift | 0.15 | 0.08 | 0.05 |
| Lighthouse Score | 75 | 88 | 95 |

### **ğŸ¯ SEOæŒ‡æ¨™**

| é …ç›® | ç¾åœ¨ | æ”¹å–„å¾Œ |
|------|------|--------|
| Core Web Vitals | éƒ¨åˆ†çš„Good | å…¨æŒ‡æ¨™Good |
| æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ | åŸºæœ¬ã®ã¿ | å…¨ãƒšãƒ¼ã‚¸å¯¾å¿œ |
| ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ | 80ç‚¹ | 95ç‚¹ä»¥ä¸Š |
| ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– | 85ç‚¹ | 95ç‚¹ä»¥ä¸Š |

### **ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æŒ‡æ¨™**

| é …ç›® | æœŸå¾…æ”¹å–„ |
|------|----------|
| ç›´å¸°ç‡ | 20%å‰Šæ¸› |
| æ»åœ¨æ™‚é–“ | 30%å»¶é•· |
| ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼/ã‚»ãƒƒã‚·ãƒ§ãƒ³ | 25%å‘ä¸Š |
| ãƒ¢ãƒã‚¤ãƒ«åˆ©ç”¨æº€è¶³åº¦ | å¤§å¹…æ”¹å–„ |

---

## **7. æŠ€è¡“çš„è² å‚µãƒ»æ³¨æ„äº‹é …**

### **âš ï¸ å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹**

**1. ç”»åƒæœ€é©åŒ–æœ‰åŠ¹åŒ–æ™‚ã®æ³¨æ„**:
- Notionã‹ã‚‰å–å¾—ã™ã‚‹ç”»åƒURLã®å‡¦ç†ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§
- é–‹ç™ºç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆã‚’ååˆ†ã«å®Ÿæ–½
- Firebase Hostingã®é™çš„é…ä¿¡è¨­å®šç¢ºèª

**2. Dynamic importså°å…¥æ™‚**:
- SEOã«å½±éŸ¿ã—ãªã„ã‚ˆã†ã€é‡è¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯åŒæœŸèª­ã¿è¾¼ã¿ç¶­æŒ
- ãƒ­ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚°ã‚¹ãƒ†ãƒ¼ãƒˆã®é©åˆ‡ãªå®Ÿè£…
- ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªã®è¨­å®š

**3. æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿å®Ÿè£…æ™‚**:
- ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ç¢ºèª
- Google Search Console ã§ã®æ¤œè¨¼
- æ®µéšçš„ãªå®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆ

### **ğŸ”„ ç¶™ç¶šçš„æ”¹å–„ã®ãŸã‚ã®ä»•çµ„ã¿**

**1. ç›£è¦–ä½“åˆ¶**:
- Web Vitalsç¶™ç¶šç›£è¦–
- ã‚¨ãƒ©ãƒ¼è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†

**2. å®šæœŸãƒ¬ãƒ“ãƒ¥ãƒ¼**:
- æœˆæ¬¡ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ
- å››åŠæœŸSEOçŠ¶æ³ç¢ºèª
- å¹´æ¬¡æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è¦‹ç›´ã—

**3. æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«**:
- ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãå•é¡Œç‰¹å®š
- ä»®èª¬ç«‹æ¡ˆã¨æ¤œè¨¼å®Ÿè£…
- åŠ¹æœæ¸¬å®šã¨æ¬¡æœŸæ”¹å–„è¨ˆç”»

---

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãƒ„ãƒ¼ã‚½ãƒ³æ—¥æœ¬èªå­¦æ ¡ã‚µã‚¤ãƒˆã®ç¶™ç¶šçš„ãªæ”¹å–„ã‚’ç›®çš„ã¨ã—ã¦ä½œæˆã•ã‚Œã¾ã—ãŸã€‚å„ãƒ•ã‚§ãƒ¼ã‚ºã®å®Ÿè£…å®Œäº†å¾Œã¯ã€åŠ¹æœæ¸¬å®šã‚’è¡Œã„ã€æ¬¡ã®æ”¹å–„è¨ˆç”»ã«åæ˜ ã•ã›ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚**